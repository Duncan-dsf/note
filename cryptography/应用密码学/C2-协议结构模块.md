# 2.1 协议介绍

# 2.7 加密的数字签名

通过把公钥密码和数字签名结合起来，我们能够产生一个协议，可把数字签名的真实性和加密的安全性合起来

就像写一封信：签名提供了作者的证明，而信封提供了秘密性

- Alice用她的私钥对信息签名
  $$
  S_A(M)
  $$

- Alice用Bob的公钥对签名信息加密，然后发送给Bob
  $$
  E_B(S_A(M))
  $$

- Bob用他的私钥解密
  $$
  D_B(E_B(S_A(M))) = S_A(M)
  $$

- Bob用Alice的公钥验证并恢复出信息
  $$
  V_A(S_A(M)) = M
  $$

## 加密和签名的先后关系

加密前签名是很自然的、谨慎的做法。

- 更安全：敌人不可能从加密的信息中把签名移走，然后加上自己的签名
- 还有法律的考虑：当他附加他的签名的时候，如果签名者不能见到被签名的文本，那么签名没有多少法律强制作用

## 密钥管理

Alice没有理由必须使用同一对公钥/私钥用户加密和签名，她可以有两个密钥对：一个用于加密(签名的密钥)，一个用于解密(加解密的密钥)

- 她可以把签名的私钥交给警察而不会影响到其他密钥
- 并且密钥能够有不同的长度，能够在不同的时间终止使用

## 时间标记

这个协议应该使用时间标记来阻止信息的重复使用。也能阻止其他潜在的危险：

### 作为收据的重发消息

